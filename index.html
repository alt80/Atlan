
<html>
    
    <title>ATLAN</title>
    <link rel = "stylesheet" type="text/css" href="style.css">
    <script src="uploader.js"></script>

    <form name="upload" method="POST" enctype="multipart/form-data" action="/upload">
        <input type="file" name="myfile">
        <input type="submit" name="submit" value="Upload To Atlan">
        <button onclick="uploader.stop()"> Stop</button>
        <div id="res" ></div>
    </form>

  

    <script>
        function output(txt){
            document.getElementById('res').innerHTML = txt;
        }
        function progress(loaded,total){
            output("uploaded " +  loaded + " of " + total);
        }
        let upload ;
            document.forms.upload.onsubmit = async function(event){
                event.preventDefault();
                //document.getElementById('res').innerHTML = "txt";
                let file = this.elements.myfile.files[0];
                if(!file) {
                    console.log("error");
                    return ;
                }
//console.log(file);
                upload = new uploader({file,progress});

                try{
                    let uploaded  = await upload.upload();
                    if(uploaded){
                        output("Successfully Uploaded");
                    } else {
                        output("Stopped");
                    }
                }
                catch(e){
                    console.log(e);
                    output("error!");
                }
            }
    </script>
</html>